!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(t="undefined"!=typeof globalThis?globalThis:t||self).getCameraFlightAnimation=o()}(this,(function(){"use strict";const t=Math.PI,o=2*t;function i(t,i=0){return function(t,o,i){const n=i-o;if(t<o)for(t+=n;t<o;)t+=n;else if(t>i)for(t-=n;t>i;)t-=n;return t}(t,i,i+o)}return function(n,e){return class{constructor(t){this.camera=t}get isFlighting(){return!!this._flightTween}cancelFlight(){this._flightTween&&(this._flightTween.stop(),delete this._flightTween)}flyTo(a={}){if(a.quaternion&&(a.rotation=(new n.Euler).setFromQuaternion(a.quaternion)),!a.position&&!a.rotation)return void console.warn("The position or rotation must be require.");this.cancelFlight();let r={},s={};a.position&&(r.positionX=this.camera.position.x,r.positionY=this.camera.position.y,r.positionZ=this.camera.position.z,s.positionX=a.position.x,s.positionY=a.position.y,s.positionZ=a.position.z),a.rotation&&(r.rotationX=i(this.camera.rotation.x,-t),r.rotationY=i(this.camera.rotation.y,-t),r.rotationZ=i(this.camera.rotation.z,-t),s.rotationX=i(a.rotation.x,-t),s.rotationY=i(a.rotation.y,-t),s.rotationZ=i(a.rotation.z,-t),Math.abs(r.rotationX-s.rotationX)>t&&(r.rotationX>s.rotationX?s.rotationX+=o:r.rotationX<s.rotationX&&(s.rotationX-=o)),Math.abs(r.rotationY-s.rotationY)>t&&(r.rotationY>s.rotationY?s.rotationY+=o:r.rotationY<s.rotationY&&(s.rotationY-=o)),Math.abs(r.rotationZ-s.rotationZ)>t&&(r.rotationZ>s.rotationZ?s.rotationZ+=o:r.rotationZ<s.rotationZ&&(s.rotationZ-=o)));const p=1e3*(a.duration??3);if(p<=0)return a.position&&this.camera.position.set(s.positionX,s.positionY,s.positionZ),a.rotation&&this.camera.rotation.set(s.rotationX,s.rotationY,s.rotationZ),this.camera.matrixWorldNeedsUpdate=!0,void("function"==typeof a.complete&&a.complete(this));const h=a.easing??e.Easing.Linear.None,c=1e3*(a.delay??0);this._flightTween=new e.Tween(r).to(s,p).easing(h).delay(c).onUpdate((()=>{a.position&&this.camera.position.set(r.positionX,r.positionY,r.positionZ),a.rotation&&this.camera.rotation.set(r.rotationX,r.rotationY,r.rotationZ),this.camera.matrixWorldNeedsUpdate=!0,"function"==typeof a.update&&a.update(this)})).onComplete((()=>{delete this._flightTween,"function"==typeof a.complete&&a.complete(this)})).start()}setView(t={}){t.duration=0,this.flyTo(t)}}}}));
